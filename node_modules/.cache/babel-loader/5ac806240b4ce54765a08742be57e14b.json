{"ast":null,"code":"import _regeneratorRuntime from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import SearchPresenter from\"./SearchPresenter\";import{moviesApi}from\"../../api\";import{tvApi}from\"../../api\";var _default=/*#__PURE__*/function(_React$Component){_inherits(_default,_React$Component);function _default(){var _getPrototypeOf2;var _this;_classCallCheck(this,_default);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(_default)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={movieResults:null,tvResults:null,searchTerm:\"\",error:null,loading:false};_this.handleSubmit=function(event){// 검색창에 검색 후 엔터를 누르면 searchTerm이 빈칸이 아닌것을 체크 후 search함수 실행\nevent.preventDefault();var searchTerm=_this.state.searchTerm;if(searchTerm!==\"\"){_this.searchByTerm();}};_this.updateTerm=function(e){var value=e.target.value;_this.setState({searchTerm:value});};_this.searchByTerm=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var searchTerm,_ref2,movieResults,_ref3,tvResults;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:searchTerm=_this.state.searchTerm;_this.setState({loading:true});_context.prev=2;_context.next=5;return moviesApi.search(searchTerm);case 5:_ref2=_context.sent;movieResults=_ref2.data.results;_context.next=9;return tvApi.search(searchTerm);case 9:_ref3=_context.sent;tvResults=_ref3.data.results;_this.setState({movieResults:movieResults,tvResults:tvResults});_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);_this.setState({error:\"Can't find results.\"});case 17:_context.prev=17;_this.setState({loading:false});return _context.finish(17);case 20:case\"end\":return _context.stop();}}},_callee,null,[[2,14,17,20]]);}));return _this;}_createClass(_default,[{key:\"render\",value:function render(){var _this$state=this.state,movieResults=_this$state.movieResults,tvResults=_this$state.tvResults,searchTerm=_this$state.searchTerm,error=_this$state.error,loading=_this$state.loading;// console.log(this.state)\nreturn React.createElement(SearchPresenter,{movieResults:movieResults,tvResults:tvResults,searchTerm:searchTerm,error:error,loading:loading,handleSubmit:this.handleSubmit,updateTerm:this.updateTerm});}}]);return _default;}(React.Component);export{_default as default};","map":{"version":3,"sources":["/Users/youngjikim/workspace-directory/react_project-directory/nomflix-react-projext/src/Routes/Search/SearchContainer.js"],"names":["React","SearchPresenter","moviesApi","tvApi","state","movieResults","tvResults","searchTerm","error","loading","handleSubmit","event","preventDefault","searchByTerm","updateTerm","e","value","target","setState","search","data","results","Component"],"mappings":"i5CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,OAAQC,SAAR,KAAwB,WAAxB,CACA,OAAQC,KAAR,KAAoB,WAApB,C,+ZAGEC,K,CAAQ,CACNC,YAAY,CAAE,IADR,CAENC,SAAS,CAAE,IAFL,CAGNC,UAAU,CAAE,EAHN,CAINC,KAAK,CAAE,IAJD,CAKNC,OAAO,CAAE,KALH,C,OAQRC,Y,CAAe,SAACC,KAAD,CAAW,CAAE;AAC1BA,KAAK,CAACC,cAAN,GADwB,GAEjBL,CAAAA,UAFiB,CAEH,MAAKH,KAFF,CAEjBG,UAFiB,CAGxB,GAAIA,UAAU,GAAK,EAAnB,CAAuB,CACrB,MAAKM,YAAL,GACD,CACF,C,OAEDC,U,CAAa,SAACC,CAAD,CAAO,IACFC,CAAAA,KADE,CACQD,CADR,CACXE,MADW,CACFD,KADE,CAElB,MAAKE,QAAL,CAAc,CACZX,UAAU,CAACS,KADC,CAAd,EAGD,C,OAEDH,Y,sEAAe,qLACNN,UADM,CACQ,MAAKH,KADb,CACNG,UADM,CAEb,MAAKW,QAAL,CAAc,CAACT,OAAO,CAAE,IAAV,CAAd,EAFa,sCAKmCP,CAAAA,SAAS,CAACiB,MAAV,CAAiBZ,UAAjB,CALnC,4BAKYF,YALZ,OAKJe,IALI,CAKGC,OALH,uBAMgClB,CAAAA,KAAK,CAACgB,MAAN,CAAaZ,UAAb,CANhC,4BAMYD,SANZ,OAMJc,IANI,CAMGC,OANH,CAOX,MAAKH,QAAL,CAAc,CACZb,YAAY,CAAZA,YADY,CAEZC,SAAS,CAATA,SAFY,CAAd,EAPW,iFAYX,MAAKY,QAAL,CAAc,CAACV,KAAK,CAAE,qBAAR,CAAd,EAZW,yBAcX,MAAKU,QAAL,CAAc,CAACT,OAAO,CAAE,KAAV,CAAd,EAdW,sG,6EAkBN,iBACuD,KAAKL,KAD5D,CACAC,YADA,aACAA,YADA,CACcC,SADd,aACcA,SADd,CACyBC,UADzB,aACyBA,UADzB,CACqCC,KADrC,aACqCA,KADrC,CAC4CC,OAD5C,aAC4CA,OAD5C,CAEP;AACA,MACE,qBAAC,eAAD,EACE,YAAY,CAAEJ,YADhB,CAEE,SAAS,CAAEC,SAFb,CAGE,UAAU,CAAEC,UAHd,CAIE,KAAK,CAAEC,KAJT,CAKE,OAAO,CAAEC,OALX,CAME,YAAY,CAAE,KAAKC,YANrB,CAOE,UAAU,CAAE,KAAKI,UAPnB,EADF,CAWD,C,sBAxD0Bd,KAAK,CAACsB,S","sourcesContent":["import React from \"react\";\nimport SearchPresenter from \"./SearchPresenter\";\nimport {moviesApi} from \"../../api\";\nimport {tvApi} from \"../../api\";\n\nexport default class extends React.Component {\n  state = {\n    movieResults: null,\n    tvResults: null,\n    searchTerm: \"\",\n    error: null,\n    loading: false\n  };\n\n  handleSubmit = (event) => { // 검색창에 검색 후 엔터를 누르면 searchTerm이 빈칸이 아닌것을 체크 후 search함수 실행\n    event.preventDefault();\n    const {searchTerm} = this.state;\n    if (searchTerm !== \"\") {\n      this.searchByTerm();\n    }\n  };\n\n  updateTerm = (e) => {\n    const {target: {value}} = e;\n    this.setState({\n      searchTerm:value\n    })\n  };\n\n  searchByTerm = async () => {\n    const {searchTerm} = this.state;\n    this.setState({loading: true});\n    try {\n      // throw Massage()\n      const {data: {results: movieResults}} = await moviesApi.search(searchTerm);\n      const {data: {results: tvResults}} = await tvApi.search(searchTerm);\n      this.setState({\n        movieResults,\n        tvResults\n      });\n    } catch {\n      this.setState({error: \"Can't find results.\"});\n    } finally {\n      this.setState({loading: false});\n    }\n  };\n\n  render() {\n    const {movieResults, tvResults, searchTerm, error, loading} = this.state;\n    // console.log(this.state)\n    return (\n      <SearchPresenter\n        movieResults={movieResults}\n        tvResults={tvResults}\n        searchTerm={searchTerm}\n        error={error}\n        loading={loading}\n        handleSubmit={this.handleSubmit}\n        updateTerm={this.updateTerm}\n      />\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}